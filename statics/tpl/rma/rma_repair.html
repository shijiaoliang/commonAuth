<div class="container-fluid listStoreKnowledge wrapper-md" ng-controller="siteRmaRepairController">
    <div class="lt" style="text-align: right;" ng-if="rmaSheetDetail.controlPrivilege == true">
        <button class="btn m-b-xs w-xs btn-info" type="button" style="margin-right: 0px;"  ng-click="Repairsave()">Save</button>
        <button ng-show="rmaSheetDetail.status==330" class="btn m-b-xs w-xs btn-success" style="margin-right: 0px;margin-left: 20px;width: 120px;"  type="button"   ng-click="finishRepair(rmaSheetDetail.rmaSheetId)">Finish repair</button>
    </div>

    <div class="panel panel-warning" draggable="false">
        <div class="panel-heading" style="font-size: 16px;font-weight: bolder;">Replacement parts</div>
        <div class="list-group bg-white"  style="padding: 20px;">
            <table style="margin-bottom: 10px;">
                <tr>
                    <td >
                        SKU
                    </td>
                    <td>
                        <input type='text' class="form-control" ng-model="Repairemo.goodsCode" style="width: 180px;" name=''/>  
                    </td>
                    <td style="padding-left: 10px;">
                        Type
                    </td>
                    <td>
                        <input type='text' class="form-control" ng-model="Repairemo.type" style="width: 180px;" name=''/>  
                    </td>
                    <td style="padding-left: 10px;">
                        Name
                    </td>
                    <td>
                        <input type='text' class="form-control" ng-model="Repairemo.descr" style="width: 180px;" name=''/>  
                    </td>
                    <td style="padding-left:10px;">
<!--                        <button class="btn m-b-xs w-xs btn-success"  type="button" ng-click="RepaireSear()">Search</button>-->
                        <button class="btn m-b-xs w-xs btn-danger" ng-click="resetRepaireSear()" type="button">Reset</button>
                    </td>
                </tr>
            </table>


            <!--Replacement parts-->
            <div>
                <div>
                    <table class="table" style="margin-bottom: 0px;width: 70%;">
                        <colgroup><col style="width: 100px;" /></colgroup>
                        <colgroup><col style="width: 100px;" /></colgroup>
                        <colgroup><col style="width: 100px;" /></colgroup>
                        <colgroup><col style="width: 300px;" /></colgroup>
                        <colgroup><col style="width: 150px;" /></colgroup>
                        <colgroup><col style="width: 150px;" /></colgroup>
                        <thead>
                        <tr style="background-color: #EAF0F7;" >
                            <th>select</th>
                            <th>SKU</th>
                            <th>Type</th>
                            <th>Name</th>
                            <th>Quotation</th>
                            <th>Currency</th>
                        </tr>
                        </thead>
                    </table>
                </div>
                <div style="height: 200px;overflow-y: auto;position: relative;width: 70%;" id="repaireReplacementDiv">
                    <table class="table">
                        <colgroup><col style="width: 100px;" /></colgroup>
                        <colgroup><col style="width: 100px;" /></colgroup>
                        <colgroup><col style="width: 100px;" /></colgroup>
                        <colgroup><col style="width: 300px;" /></colgroup>
                        <colgroup><col style="width: 150px;" /></colgroup>
                        <colgroup><col style="width: 150px;" /></colgroup>
                        <tbody>
                        <tr ng-repeat="repaireReplacement in repaireReplacements  | filter:searhRepairemoCodeFilter | filter:searchRepairemoTypeFilter | filter:searchRepairemoDescrFilter">
                            <td>
                                <label class="i-checks m-b-none" >
                                    <label class="i-checks m-b-none">
                                        <input type="checkbox" ng-click="topTRTAble($event, 12,'repaireReplacementDiv')" value="{{repaireReplacement.id}}" ng-disabled="repaireReplacement.isDisabled || !rmaSheetDetail.controlPrivilege"   ng-checked="repaireReplacement.isSelect"  class='MalfunctionList4'>
                                        <i></i>
                                    </label>
                            </td>
                            <td>
                                {{repaireReplacement.goodsCode}}
                            </td>
                            <td>
                                {{repaireReplacement.typeTxt}}
                            </td>
                            <td style="word-break: break-all;">
                                {{repaireReplacement.descr}}
                            </td>
                            <td>
                                {{repaireReplacement.price / 100| number :2}}
                            </td>
                            <td>
                                {{repaireReplacement.currency}}
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="panel panel-warning" draggable="false"  ng-if="rmaSheetDetail.imeiRecord.length > 0 && repaireImeiShow">
        <div class="panel-heading" style="font-size: 16px;font-weight: bolder;"><span style="color: red;">*</span>IMEI record</div>
        <div class="list-group bg-white"  style="padding: 20px;">
            <table class="rma-detail-table table  b-t b-light" style="width: 70%;min-width: 900px;" >
                <thead>
                    <tr style="background-color: #EAF0F7;">
                        <th>SKU</th>
                        <th>Product</th>
                        <th>Previous IMEI</th>
                        <th>New IMEI</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="rmaGoodsList in rmaSheetDetail.imeiRecord">
                        <td class="rma-detail-td">
                            {{rmaGoodsList.goodsCode}}
                        </td>
                        <td class="rma-detail-td" style="max-width:320px;">
                            {{rmaGoodsList.goodsName}}
                        </td>
                        <td class="rma-detail-td" style="max-width:140px;">
                            <span style="width: 100%;float: left;">{{rmaGoodsList.imeiOld1}}</span>
                            <span style="width: 100%" ng-if="rmaGoodsList.imeiOld2 != '' && rmaGoodsList.imeiOld2 != null">{{rmaGoodsList.imeiOld2}}</span>
                        </td>
                        <td class="rma-detail-td">
                            <input type='text' class="form-control" ng-disabled="!rmaSheetDetail.controlPrivilege"  ng-model="rmaGoodsList.imeiNew1" style="width: 180px;float: left;" id="newImei" name="newImei"/>                          
                            <button class="btn m-b-xs w-xs btn-success"  type="button" style="margin-left: 5px;" ng-if="rmaSheetDetail.controlPrivilege" ng-click="saveImeiRep(rmaGoodsList.imeiOld1)">Save</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="panel panel-warning" draggable="false">
        <div class="panel-heading" style="font-size: 16px;font-weight: bolder;">Repair Detail</div>
        <div class="list-group bg-white"  style="padding: 20px;">
            <div>
                <textarea class="form-control" style="height: 80px;width: 700px;" ng-model='rmaSheetDetail.repairDetail'></textarea>
            </div>
            <div  style="margin-top: 20px;">
                <table style="">
                    <tr>
                        <td style="font-size: 16px;font-weight: bold;">
                            <span style="color: red;">*</span>Software version: 
                        </td>
                        <td>
                            <input type='text' class="form-control" ng-model='rmaSheetDetail.softwareVersion' style="width: 180px;float:left;" /> 
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>